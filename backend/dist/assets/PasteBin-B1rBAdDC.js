import{r as l,B as a,z as e,E as s,K as t,J as u,ah as i,C as o,D as n,ak as d,O as c,M as r,u as v,n as p}from"./vue-vendor-CdeIc39u.js";import{g as m,s as h,t as b,w as y,x as f,y as w,E as k}from"./element-plus-BIlKvLmW.js";import{r as _}from"./qrcode-DA2KNt05.js";import{_ as x}from"./index-DnEAA98D.js";import"./mermaid-Bo_AvqXD.js";const g=m(_()),V={class:"tool-container"},C={key:0,class:"quick-section"},j={class:"quick-editor"},S={class:"quick-actions"},q={key:1,class:"create-section"},z={class:"editor-panel"},U={class:"panel-header"},J={class:"options-row"},T={class:"option-item"},D={class:"option-item"},L={class:"option-item"},M={key:2,class:"result-section"},O={class:"result-card"},N={class:"result-header"},P={class:"share-url-box"},E={class:"url-display"},B={class:"url-actions"},I={class:"qr-section"},W={class:"result-info"},$={key:0},A={key:3,class:"error-msg"},G={key:4,class:"tips-section"},H=x({__name:"PasteBin",setup(m){const _=l(""),x=l(""),H=l("text"),K=l(24),Q=l(100),X=l(""),Y=l(!1),F=l(!1),R=l(!1),Z=l(""),ll=l(""),al=l(""),el=l(""),sl=l(null),tl=async()=>{await il()},ul=l=>{const a=l.clipboardData?.getData("text")||"";if(a.trim().startsWith("{")||a.trim().startsWith("["))try{JSON.parse(a),H.value="json"}catch{}},il=async()=>{if(_.value.trim()){Y.value=!0,el.value="";try{const l=await fetch("/api/paste",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:_.value,title:x.value,language:H.value,expires_in:K.value,max_views:Q.value,password:X.value})}),a=await l.json();if(!l.ok)throw new Error(a.error||"创建失败");Z.value=a.id,ll.value=new Date(a.expires_at).toLocaleString("zh-CN"),al.value=`${window.location.origin}/paste/${a.id}`,F.value=!0;try{await navigator.clipboard.writeText(al.value),k.success("链接已自动复制到剪贴板")}catch{k.success("分享创建成功")}await p(),sl.value&&g.toCanvas(sl.value,al.value,{width:150,margin:2,color:{dark:"#333",light:"#fff"}})}catch(l){el.value=l.message}finally{Y.value=!1}}else el.value="请输入要分享的内容"},ol=async()=>{try{await navigator.clipboard.writeText(al.value),k.success("链接已复制")}catch(l){k.error("复制失败")}},nl=()=>{window.open(al.value,"_blank")},dl=()=>{_.value="",x.value="",X.value="",F.value=!1,Z.value=""};return(l,p)=>{const m=d("el-icon"),k=d("el-button"),g=d("el-input"),cl=d("el-option"),rl=d("el-select"),vl=d("el-input-number"),pl=d("el-alert");return e(),a("div",V,[p[22]||(p[22]=s("div",{class:"tool-header"},[s("h2",null,"共享粘贴板"),s("div",{class:"info-text"}," 多设备快速同步 - 创建后自动复制链接 ")],-1)),R.value?(e(),a("div",q,[s("div",z,[s("div",U,[o(g,{modelValue:x.value,"onUpdate:modelValue":p[2]||(p[2]=l=>x.value=l),placeholder:"标题（可选）",style:{width:"200px"},size:"small"},null,8,["modelValue"]),o(rl,{modelValue:H.value,"onUpdate:modelValue":p[3]||(p[3]=l=>H.value=l),placeholder:"语言",style:{width:"120px"},size:"small"},{default:n(()=>[o(cl,{label:"纯文本",value:"text"}),o(cl,{label:"JSON",value:"json"}),o(cl,{label:"JavaScript",value:"javascript"}),o(cl,{label:"TypeScript",value:"typescript"}),o(cl,{label:"Python",value:"python"}),o(cl,{label:"Go",value:"go"}),o(cl,{label:"Java",value:"java"}),o(cl,{label:"C/C++",value:"cpp"}),o(cl,{label:"HTML",value:"html"}),o(cl,{label:"CSS",value:"css"}),o(cl,{label:"SQL",value:"sql"}),o(cl,{label:"Markdown",value:"markdown"}),o(cl,{label:"Shell",value:"bash"}),o(cl,{label:"YAML",value:"yaml"}),o(cl,{label:"XML",value:"xml"})]),_:1},8,["modelValue"]),o(k,{size:"small",text:"",onClick:p[4]||(p[4]=l=>R.value=!1)},{default:n(()=>[...p[11]||(p[11]=[r("简洁模式",-1)])]),_:1})]),u(s("textarea",{"onUpdate:modelValue":p[5]||(p[5]=l=>_.value=l),class:"code-editor",placeholder:"在此输入要分享的内容...",spellcheck:"false"},null,512),[[i,_.value]])]),s("div",J,[s("div",T,[p[12]||(p[12]=s("span",{class:"option-label"},"过期时间",-1)),o(rl,{modelValue:K.value,"onUpdate:modelValue":p[6]||(p[6]=l=>K.value=l),style:{width:"120px"}},{default:n(()=>[o(cl,{label:"1 小时",value:1}),o(cl,{label:"6 小时",value:6}),o(cl,{label:"24 小时",value:24}),o(cl,{label:"3 天",value:72}),o(cl,{label:"7 天",value:168})]),_:1},8,["modelValue"])]),s("div",D,[p[13]||(p[13]=s("span",{class:"option-label"},"最大访问次数",-1)),o(vl,{modelValue:Q.value,"onUpdate:modelValue":p[7]||(p[7]=l=>Q.value=l),min:1,max:1e3},null,8,["modelValue"])]),s("div",L,[p[14]||(p[14]=s("span",{class:"option-label"},"访问密码",-1)),o(g,{modelValue:X.value,"onUpdate:modelValue":p[8]||(p[8]=l=>X.value=l),type:"password",placeholder:"可选",style:{width:"150px"},"show-password":""},null,8,["modelValue"])]),o(k,{type:"primary",size:"large",onClick:il,loading:Y.value},{default:n(()=>[...p[15]||(p[15]=[r(" 创建分享 ",-1)])]),_:1},8,["loading"])])])):(e(),a("div",C,[s("div",j,[u(s("textarea",{"onUpdate:modelValue":p[0]||(p[0]=l=>_.value=l),class:"code-editor",placeholder:"粘贴或输入内容，点击分享即可获得链接...",spellcheck:"false",onPaste:ul},null,544),[[i,_.value]])]),s("div",S,[o(k,{type:"primary",size:"large",onClick:tl,loading:Y.value,disabled:!_.value.trim()},{default:n(()=>[o(m,null,{default:n(()=>[o(v(h))]),_:1}),p[9]||(p[9]=r(" 一键分享 ",-1))]),_:1},8,["loading","disabled"]),o(k,{size:"small",text:"",onClick:p[1]||(p[1]=l=>R.value=!0)},{default:n(()=>[...p[10]||(p[10]=[r(" 高级选项 ",-1)])]),_:1})])])),F.value?(e(),a("div",M,[s("div",O,[s("div",N,[o(m,{class:"success-icon"},{default:n(()=>[o(v(b))]),_:1}),p[16]||(p[16]=s("span",null,"分享创建成功！链接已复制",-1))]),s("div",P,[s("div",E,c(al.value),1),s("div",B,[o(k,{type:"primary",onClick:ol},{default:n(()=>[o(m,null,{default:n(()=>[o(v(y))]),_:1}),p[17]||(p[17]=r(" 复制链接 ",-1))]),_:1}),o(k,{onClick:nl},{default:n(()=>[o(m,null,{default:n(()=>[o(v(f))]),_:1}),p[18]||(p[18]=r(" 打开 ",-1))]),_:1})])]),s("div",I,[p[19]||(p[19]=s("div",{class:"qr-title"},"扫码访问",-1)),s("canvas",{ref_key:"qrCanvas",ref:sl,class:"qr-code"},null,512)]),s("div",W,[s("span",null,"ID: "+c(Z.value),1),s("span",null,"过期: "+c(ll.value),1),X.value?(e(),a("span",$,"密码: "+c(X.value),1)):t("",!0)]),o(k,{class:"new-share-btn",onClick:dl,type:"success",plain:""},{default:n(()=>[o(m,null,{default:n(()=>[o(v(w))]),_:1}),p[20]||(p[20]=r(" 创建新分享 ",-1))]),_:1})])])):t("",!0),el.value?(e(),a("div",A,[o(pl,{title:el.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):t("",!0),F.value?t("",!0):(e(),a("div",G,[...p[21]||(p[21]=[s("h4",null,"使用提示",-1),s("ul",null,[s("li",null,"直接粘贴内容，点击分享即可"),s("li",null,"链接自动复制到剪贴板"),s("li",null,"手机可扫描二维码访问"),s("li",null,"默认 24 小时后过期")],-1)])]))])}}},[["__scopeId","data-v-b7eabeac"]]);export{H as default};
