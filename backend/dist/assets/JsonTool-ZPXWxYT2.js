import{r as e,B as a,z as t,E as l,K as r,C as s,D as n,ak as o,J as u,ah as c,ag as i,O as p,M as d}from"./vue-vendor-CdeIc39u.js";import{_ as f}from"./index-CyxfecpI.js";import{E as v}from"./element-plus-SbZqr91v.js";import"./mermaid-DP1CEE-6.js";const y={class:"tool-container"},m={class:"tool-header"},h={class:"actions"},g={class:"editor-container"},O={class:"editor-panel"},J={class:"editor-panel"},S={key:0,class:"error-msg"},N={class:"jsonpath-section"},b={class:"jsonpath-input"},_={key:0,class:"jsonpath-result"},j=f({__name:"JsonTool",setup(f){const j=e(""),k=e(""),$=e(""),C=e(""),w=e(""),A=()=>{try{const e=JSON.parse(j.value);k.value=JSON.stringify(e,null,2),$.value=""}catch(e){$.value="JSON 解析错误: "+e.message}},x=()=>{try{const e=JSON.parse(j.value);k.value=JSON.stringify(e),$.value=""}catch(e){$.value="JSON 解析错误: "+e.message}},I=()=>{try{JSON.parse(j.value),$.value="",v.success("JSON 格式正确")}catch(e){$.value="JSON 解析错误: "+e.message}},V=()=>{try{const e=JSON.parse(j.value);k.value=P(e,"Root"),$.value=""}catch(e){$.value="JSON 解析错误: "+e.message}},P=(e,a)=>{if("object"!=typeof e||null===e)return U(e);if(Array.isArray(e))return 0===e.length?"[]interface{}":"[]"+P(e[0],a+"Item");let t=`type ${a} struct {\n`;for(const[l,r]of Object.entries(e)){const e=T(l);t+=`\t${e} ${E(r,e)} \`json:"${l}"\`\n`}return t+="}",t},U=e=>{if(null===e)return"interface{}";switch(typeof e){case"string":return"string";case"number":return Number.isInteger(e)?"int64":"float64";case"boolean":return"bool";default:return"interface{}"}},E=(e,a)=>null===e?"interface{}":Array.isArray(e)?0===e.length?"[]interface{}":"[]"+E(e[0],a+"Item"):"object"==typeof e?"*"+a:U(e),T=e=>e.replace(/(^|_)(\w)/g,(e,a,t)=>t.toUpperCase()),D=()=>{try{const e=JSON.parse(j.value);k.value=K(e,"Root"),$.value=""}catch(e){$.value="JSON 解析错误: "+e.message}},K=(e,a)=>{if("object"!=typeof e||null===e)return R(e);if(Array.isArray(e))return 0===e.length?"any[]":K(e[0],a+"Item")+"[]";let t=`interface ${a} {\n`;for(const[l,r]of Object.entries(e)){t+=`  ${l}: ${z(r,T(l))};\n`}return t+="}",t},R=e=>{if(null===e)return"null";switch(typeof e){case"string":return"string";case"number":return"number";case"boolean":return"boolean";default:return"any"}},z=(e,a)=>null===e?"null":Array.isArray(e)?0===e.length?"any[]":z(e[0],a+"Item")+"[]":"object"==typeof e?a:R(e),B=()=>{try{const e=JSON.parse(j.value),a=G(e,C.value);w.value=JSON.stringify(a,null,2),$.value=""}catch(e){$.value="JSON Path 查询错误: "+e.message}},G=(e,a)=>{if(!a.startsWith("$"))throw new Error("JSON Path 必须以 $ 开头");const t=a.slice(1).split(/\.|\[|\]/).filter(e=>e);let l=e;for(const r of t){if(null==l)return;l=/^\d+$/.test(r)?l[parseInt(r)]:l[r]}return l},M=async()=>{try{await navigator.clipboard.writeText(k.value),v.success("已复制到剪贴板")}catch(e){v.error("复制失败")}};return(e,f)=>{const v=o("el-button"),P=o("el-button-group"),U=o("CopyDocument"),E=o("el-icon"),T=o("el-alert"),K=o("el-input");return t(),a("div",y,[l("div",m,[f[9]||(f[9]=l("h2",null,"JSON 工具",-1)),l("div",h,[s(P,null,{default:n(()=>[s(v,{type:"primary",onClick:A},{default:n(()=>[...f[3]||(f[3]=[d("格式化",-1)])]),_:1}),s(v,{onClick:x},{default:n(()=>[...f[4]||(f[4]=[d("压缩",-1)])]),_:1}),s(v,{onClick:I},{default:n(()=>[...f[5]||(f[5]=[d("校验",-1)])]),_:1})]),_:1}),s(P,{style:{"margin-left":"10px"}},{default:n(()=>[s(v,{onClick:V},{default:n(()=>[...f[6]||(f[6]=[d("转 Go Struct",-1)])]),_:1}),s(v,{onClick:D},{default:n(()=>[...f[7]||(f[7]=[d("转 TypeScript",-1)])]),_:1})]),_:1}),s(v,{onClick:M,style:{"margin-left":"10px"}},{default:n(()=>[s(E,null,{default:n(()=>[s(U)]),_:1}),f[8]||(f[8]=d(" 复制 ",-1))]),_:1})])]),l("div",g,[l("div",O,[f[10]||(f[10]=l("div",{class:"panel-header"},"输入 JSON",-1)),u(l("textarea",{"onUpdate:modelValue":f[0]||(f[0]=e=>j.value=e),class:"code-editor",placeholder:"请输入 JSON...",spellcheck:"false"},null,512),[[c,j.value]])]),l("div",J,[f[11]||(f[11]=l("div",{class:"panel-header"},"输出结果",-1)),u(l("textarea",{"onUpdate:modelValue":f[1]||(f[1]=e=>k.value=e),class:"code-editor",readonly:"",spellcheck:"false"},null,512),[[c,k.value]])])]),$.value?(t(),a("div",S,[s(T,{title:$.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):r("",!0),l("div",N,[f[13]||(f[13]=l("h3",null,"JSON Path 查询",-1)),l("div",b,[s(K,{modelValue:C.value,"onUpdate:modelValue":f[2]||(f[2]=e=>C.value=e),placeholder:"输入 JSON Path，如 $.data.items[0].name",onKeyup:i(B,["enter"])},{append:n(()=>[s(v,{onClick:B},{default:n(()=>[...f[12]||(f[12]=[d("查询",-1)])]),_:1})]),_:1},8,["modelValue"])]),w.value?(t(),a("div",_,[l("pre",null,p(w.value),1)])):r("",!0)])])}}},[["__scopeId","data-v-0a07f054"]]);export{j as default};
