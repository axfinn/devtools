import{r as l,c as a,h as e,B as s,z as i,E as t,K as r,C as c,D as o,ak as n,O as u,M as d,ag as v,P as p,a4 as m,u as y}from"./vue-vendor-CYJ4K8iR.js";import{E as k,C as g,t as h,x as f,D as _}from"./element-plus-dcQV5w3x.js";import{_ as C}from"./index-CT3p-j8z.js";import"./mermaid-BoZA0hCz.js";const A={class:"tool-container"},x={class:"ip-section"},w={class:"section-header"},b={key:0,class:"ip-display"},N={class:"ip-value"},P={key:1,class:"ip-loading"},I={key:2,class:"ip-error"},S={class:"dns-section"},j={class:"dns-input-row"},z={key:0,class:"dns-error"},D={key:1,class:"dns-results"},T={key:0,class:"record-group"},E={class:"record-list"},M={class:"record-value"},V={key:1,class:"record-group"},X={class:"record-list"},L={class:"record-value"},U={key:2,class:"record-group"},q={class:"record-list"},K={class:"record-value"},O={key:3,class:"record-group"},B={class:"record-list"},R={class:"record-priority"},$={class:"record-value"},F={key:4,class:"record-group"},G={class:"record-list"},H={class:"record-value"},J={key:5,class:"record-group"},Q={class:"record-list"},W={class:"record-value"},Y={key:6,class:"no-records"},Z={class:"common-domains"},ll={class:"domain-tags"},al=C({__name:"DnsTool",setup(C){const al=l(""),el=l(!1),sl=l(""),il=l(""),tl=l("ALL"),rl=l(null),cl=l(!1),ol=l(""),nl=["google.com","github.com","cloudflare.com","baidu.com","qq.com"],ul=a(()=>{if(!rl.value)return!1;const l=rl.value;return!(l.a&&0!==l.a.length||l.aaaa&&0!==l.aaaa.length||l.cname&&0!==l.cname.length||l.mx&&0!==l.mx.length||l.ns&&0!==l.ns.length||l.txt&&0!==l.txt.length)}),dl=async()=>{el.value=!0,sl.value="",al.value="";try{const l=await fetch("/api/ip");if(!l.ok)throw new Error("获取 IP 失败");const a=await l.json();al.value=a.ip}catch(l){sl.value=l.message||"获取 IP 失败"}finally{el.value=!1}},vl=async()=>{if(il.value.trim()){cl.value=!0,ol.value="",rl.value=null;try{const l=new URLSearchParams({domain:il.value.trim(),type:tl.value}),a=await fetch(`/api/dns?${l}`);if(!a.ok){const l=await a.json();throw new Error(l.error||"DNS 查询失败")}rl.value=await a.json()}catch(l){ol.value=l.message||"DNS 查询失败"}finally{cl.value=!1}}else k.warning("请输入域名")},pl=async l=>{try{await navigator.clipboard.writeText(l),k.success("已复制")}catch(a){k.error("复制失败")}};return e(()=>{dl()}),(l,a)=>{const e=n("el-icon"),k=n("el-button"),C=n("el-alert"),ml=n("el-input"),yl=n("el-option"),kl=n("el-select"),gl=n("el-empty"),hl=n("el-tag");return i(),s("div",A,[a[17]||(a[17]=t("div",{class:"tool-header"},[t("h2",null,"IP / DNS 查询工具")],-1)),t("div",x,[t("div",w,[a[4]||(a[4]=t("h3",null,"当前 IP 地址",-1)),c(k,{type:"primary",size:"small",onClick:dl,loading:el.value},{default:o(()=>[c(e,null,{default:o(()=>[c(y(g))]),_:1}),a[3]||(a[3]=d(" 刷新 ",-1))]),_:1},8,["loading"])]),al.value?(i(),s("div",b,[t("div",N,u(al.value),1),c(k,{type:"primary",link:"",onClick:a[0]||(a[0]=l=>pl(al.value))},{default:o(()=>[c(e,null,{default:o(()=>[c(y(h))]),_:1}),a[5]||(a[5]=d(" 复制 ",-1))]),_:1})])):el.value?(i(),s("div",P,[c(e,{class:"is-loading"},{default:o(()=>[c(y(f))]),_:1}),a[6]||(a[6]=d(" 获取中... ",-1))])):sl.value?(i(),s("div",I,[c(C,{title:sl.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):r("",!0)]),t("div",S,[a[15]||(a[15]=t("div",{class:"section-header"},[t("h3",null,"DNS 查询 (nslookup)")],-1)),t("div",j,[c(ml,{modelValue:il.value,"onUpdate:modelValue":a[1]||(a[1]=l=>il.value=l),placeholder:"输入域名，如: example.com",class:"domain-input",onKeyup:v(vl,["enter"]),clearable:""},{prepend:o(()=>[...a[7]||(a[7]=[d("域名",-1)])]),_:1},8,["modelValue"]),c(kl,{modelValue:tl.value,"onUpdate:modelValue":a[2]||(a[2]=l=>tl.value=l),style:{width:"140px"}},{default:o(()=>[c(yl,{label:"全部",value:"ALL"}),c(yl,{label:"A (IPv4)",value:"A"}),c(yl,{label:"AAAA (IPv6)",value:"AAAA"}),c(yl,{label:"CNAME",value:"CNAME"}),c(yl,{label:"MX (邮件)",value:"MX"}),c(yl,{label:"NS (域名服务器)",value:"NS"}),c(yl,{label:"TXT",value:"TXT"})]),_:1},8,["modelValue"]),c(k,{type:"primary",onClick:vl,loading:cl.value},{default:o(()=>[c(e,null,{default:o(()=>[c(y(_))]),_:1}),a[8]||(a[8]=d(" 查询 ",-1))]),_:1},8,["loading"])]),ol.value?(i(),s("div",z,[c(C,{title:ol.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):r("",!0),rl.value&&Object.keys(rl.value).length>0?(i(),s("div",D,[rl.value.a&&rl.value.a.length>0?(i(),s("div",T,[a[9]||(a[9]=t("div",{class:"record-type"},"A 记录 (IPv4)",-1)),t("div",E,[(i(!0),s(p,null,m(rl.value.a,(l,a)=>(i(),s("div",{key:"a-"+a,class:"record-item"},[t("span",M,u(l),1),c(k,{type:"primary",link:"",size:"small",onClick:a=>pl(l)},{default:o(()=>[c(e,null,{default:o(()=>[c(y(h))]),_:1})]),_:1},8,["onClick"])]))),128))])])):r("",!0),rl.value.aaaa&&rl.value.aaaa.length>0?(i(),s("div",V,[a[10]||(a[10]=t("div",{class:"record-type"},"AAAA 记录 (IPv6)",-1)),t("div",X,[(i(!0),s(p,null,m(rl.value.aaaa,(l,a)=>(i(),s("div",{key:"aaaa-"+a,class:"record-item"},[t("span",L,u(l),1),c(k,{type:"primary",link:"",size:"small",onClick:a=>pl(l)},{default:o(()=>[c(e,null,{default:o(()=>[c(y(h))]),_:1})]),_:1},8,["onClick"])]))),128))])])):r("",!0),rl.value.cname&&rl.value.cname.length>0?(i(),s("div",U,[a[11]||(a[11]=t("div",{class:"record-type"},"CNAME 记录",-1)),t("div",q,[(i(!0),s(p,null,m(rl.value.cname,(l,a)=>(i(),s("div",{key:"cname-"+a,class:"record-item"},[t("span",K,u(l),1),c(k,{type:"primary",link:"",size:"small",onClick:a=>pl(l)},{default:o(()=>[c(e,null,{default:o(()=>[c(y(h))]),_:1})]),_:1},8,["onClick"])]))),128))])])):r("",!0),rl.value.mx&&rl.value.mx.length>0?(i(),s("div",O,[a[12]||(a[12]=t("div",{class:"record-type"},"MX 记录 (邮件服务器)",-1)),t("div",B,[(i(!0),s(p,null,m(rl.value.mx,(l,a)=>(i(),s("div",{key:"mx-"+a,class:"record-item"},[t("span",R,"优先级: "+u(l.priority),1),t("span",$,u(l.host),1),c(k,{type:"primary",link:"",size:"small",onClick:a=>pl(l.host)},{default:o(()=>[c(e,null,{default:o(()=>[c(y(h))]),_:1})]),_:1},8,["onClick"])]))),128))])])):r("",!0),rl.value.ns&&rl.value.ns.length>0?(i(),s("div",F,[a[13]||(a[13]=t("div",{class:"record-type"},"NS 记录 (域名服务器)",-1)),t("div",G,[(i(!0),s(p,null,m(rl.value.ns,(l,a)=>(i(),s("div",{key:"ns-"+a,class:"record-item"},[t("span",H,u(l),1),c(k,{type:"primary",link:"",size:"small",onClick:a=>pl(l)},{default:o(()=>[c(e,null,{default:o(()=>[c(y(h))]),_:1})]),_:1},8,["onClick"])]))),128))])])):r("",!0),rl.value.txt&&rl.value.txt.length>0?(i(),s("div",J,[a[14]||(a[14]=t("div",{class:"record-type"},"TXT 记录",-1)),t("div",Q,[(i(!0),s(p,null,m(rl.value.txt,(l,a)=>(i(),s("div",{key:"txt-"+a,class:"record-item txt-item"},[t("span",W,u(l),1),c(k,{type:"primary",link:"",size:"small",onClick:a=>pl(l)},{default:o(()=>[c(e,null,{default:o(()=>[c(y(h))]),_:1})]),_:1},8,["onClick"])]))),128))])])):r("",!0),ul.value?(i(),s("div",Y,[c(gl,{description:"未找到 DNS 记录"})])):r("",!0)])):r("",!0)]),t("div",Z,[a[16]||(a[16]=t("h4",null,"快速查询",-1)),t("div",ll,[(i(),s(p,null,m(nl,l=>c(hl,{key:l,class:"domain-tag",onClick:a=>(l=>{il.value=l,vl()})(l)},{default:o(()=>[d(u(l),1)]),_:2},1032,["onClick"])),64))])])])}}},[["__scopeId","data-v-d7aac5bf"]]);export{al as default};
