import{r as e,B as t,z as l,E as a,K as r,C as s,D as n,ak as o,J as u,ah as c,ag as i,O as f,M as p}from"./vue-vendor-CYJ4K8iR.js";import{_ as d}from"./index-CT3p-j8z.js";import{E as v}from"./element-plus-dcQV5w3x.js";import"./mermaid-BoZA0hCz.js";const y={class:"tool-container"},m={class:"tool-header"},h={class:"actions"},g={class:"editor-container"},S={class:"editor-panel"},O={class:"editor-panel"},J={key:0,class:"error-msg"},N={class:"jsonpath-section"},_={class:"jsonpath-input"},b={key:0,class:"jsonpath-result"},j=d({__name:"JsonTool",setup(d){const j=e(""),k=e(""),$=e(""),C=e(""),A=e(""),w=e(null),x=e(null);let I=!1;const E=e=>{if(I)return;I=!0;const t="left"===e?w.value:x.value,l="left"===e?x.value:w.value;t&&l&&(l.scrollTop=t.scrollTop,l.scrollLeft=t.scrollLeft),requestAnimationFrame(()=>{I=!1})},T=()=>{try{const e=JSON.parse(j.value);k.value=JSON.stringify(e,null,2),$.value=""}catch(e){$.value="JSON 解析错误: "+e.message}},V=()=>{try{const e=JSON.parse(j.value);k.value=JSON.stringify(e),$.value=""}catch(e){$.value="JSON 解析错误: "+e.message}},P=()=>{try{JSON.parse(j.value),$.value="",v.success("JSON 格式正确")}catch(e){$.value="JSON 解析错误: "+e.message}},U=()=>{try{const e=JSON.parse(j.value);k.value=D(e,"Root"),$.value=""}catch(e){$.value="JSON 解析错误: "+e.message}},D=(e,t)=>{if("object"!=typeof e||null===e)return K(e);if(Array.isArray(e))return 0===e.length?"[]interface{}":"[]"+D(e[0],t+"Item");let l=`type ${t} struct {\n`;for(const[a,r]of Object.entries(e)){const e=R(a);l+=`\t${e} ${L(r,e)} \`json:"${a}"\`\n`}return l+="}",l},K=e=>{if(null===e)return"interface{}";switch(typeof e){case"string":return"string";case"number":return Number.isInteger(e)?"int64":"float64";case"boolean":return"bool";default:return"interface{}"}},L=(e,t)=>null===e?"interface{}":Array.isArray(e)?0===e.length?"[]interface{}":"[]"+L(e[0],t+"Item"):"object"==typeof e?"*"+t:K(e),R=e=>e.replace(/(^|_)(\w)/g,(e,t,l)=>l.toUpperCase()),q=()=>{try{const e=JSON.parse(j.value);k.value=z(e,"Root"),$.value=""}catch(e){$.value="JSON 解析错误: "+e.message}},z=(e,t)=>{if("object"!=typeof e||null===e)return B(e);if(Array.isArray(e))return 0===e.length?"any[]":z(e[0],t+"Item")+"[]";let l=`interface ${t} {\n`;for(const[a,r]of Object.entries(e)){l+=`  ${a}: ${F(r,R(a))};\n`}return l+="}",l},B=e=>{if(null===e)return"null";switch(typeof e){case"string":return"string";case"number":return"number";case"boolean":return"boolean";default:return"any"}},F=(e,t)=>null===e?"null":Array.isArray(e)?0===e.length?"any[]":F(e[0],t+"Item")+"[]":"object"==typeof e?t:B(e),G=()=>{try{const e=JSON.parse(j.value),t=M(e,C.value);A.value=JSON.stringify(t,null,2),$.value=""}catch(e){$.value="JSON Path 查询错误: "+e.message}},M=(e,t)=>{if(!t.startsWith("$"))throw new Error("JSON Path 必须以 $ 开头");const l=t.slice(1).split(/\.|\[|\]/).filter(e=>e);let a=e;for(const r of l){if(null==a)return;a=/^\d+$/.test(r)?a[parseInt(r)]:a[r]}return a},W=async()=>{try{await navigator.clipboard.writeText(k.value),v.success("已复制到剪贴板")}catch(e){v.error("复制失败")}};return(e,d)=>{const v=o("el-button"),I=o("el-button-group"),D=o("CopyDocument"),K=o("el-icon"),L=o("el-alert"),R=o("el-input");return l(),t("div",y,[a("div",m,[d[11]||(d[11]=a("h2",null,"JSON 工具",-1)),a("div",h,[s(I,null,{default:n(()=>[s(v,{type:"primary",onClick:T},{default:n(()=>[...d[5]||(d[5]=[p("格式化",-1)])]),_:1}),s(v,{onClick:V},{default:n(()=>[...d[6]||(d[6]=[p("压缩",-1)])]),_:1}),s(v,{onClick:P},{default:n(()=>[...d[7]||(d[7]=[p("校验",-1)])]),_:1})]),_:1}),s(I,{style:{"margin-left":"10px"}},{default:n(()=>[s(v,{onClick:U},{default:n(()=>[...d[8]||(d[8]=[p("转 Go Struct",-1)])]),_:1}),s(v,{onClick:q},{default:n(()=>[...d[9]||(d[9]=[p("转 TypeScript",-1)])]),_:1})]),_:1}),s(v,{onClick:W,style:{"margin-left":"10px"}},{default:n(()=>[s(K,null,{default:n(()=>[s(D)]),_:1}),d[10]||(d[10]=p(" 复制 ",-1))]),_:1})])]),a("div",g,[a("div",S,[d[12]||(d[12]=a("div",{class:"panel-header"},"输入 JSON",-1)),u(a("textarea",{ref_key:"leftEditor",ref:w,"onUpdate:modelValue":d[0]||(d[0]=e=>j.value=e),class:"code-editor",placeholder:"请输入 JSON...",spellcheck:"false",onScroll:d[1]||(d[1]=e=>E("left"))},null,544),[[c,j.value]])]),a("div",O,[d[13]||(d[13]=a("div",{class:"panel-header"},"输出结果",-1)),u(a("textarea",{ref_key:"rightEditor",ref:x,"onUpdate:modelValue":d[2]||(d[2]=e=>k.value=e),class:"code-editor",readonly:"",spellcheck:"false",onScroll:d[3]||(d[3]=e=>E("right"))},null,544),[[c,k.value]])])]),$.value?(l(),t("div",J,[s(L,{title:$.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):r("",!0),a("div",N,[d[15]||(d[15]=a("h3",null,"JSON Path 查询",-1)),a("div",_,[s(R,{modelValue:C.value,"onUpdate:modelValue":d[4]||(d[4]=e=>C.value=e),placeholder:"输入 JSON Path，如 $.data.items[0].name",onKeyup:i(G,["enter"])},{append:n(()=>[s(v,{onClick:G},{default:n(()=>[...d[14]||(d[14]=[p("查询",-1)])]),_:1})]),_:1},8,["modelValue"])]),A.value?(l(),t("div",b,[a("pre",null,f(A.value),1)])):r("",!0)])])}}},[["__scopeId","data-v-e6758189"]]);export{j as default};
