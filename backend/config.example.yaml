# DevTools 配置文件
# 复制此文件为 config.yaml 并修改

# 服务器配置
server:
  port: "8080"        # 服务端口（也可通过环境变量 PORT 设置）
  mode: "release"     # 运行模式: debug, release

# 数据库配置
database:
  path: "./data/paste.db"  # 数据库文件路径（也可通过环境变量 DB_PATH 设置）
  max_connections: 10       # 最大数据库连接数

# 安全配置
security:
  # CORS 允许的来源（生产环境建议设置具体域名）
  cors_origins:
    - "*"
    # - "https://yourdomain.com"
    # - "http://localhost:5173"
  bcrypt_cost: 10  # Bcrypt 加密强度（10-12 推荐）

# 限流配置
rate_limit:
  enabled: true             # 是否启用限流
  create_per_minute: 10     # 创建操作每分钟限制次数

# 内容大小限制
limits:
  paste_max_content_size: 102400      # 粘贴板最大文本大小（100KB）
  paste_max_images: 15                # 粘贴板最大图片数量
  paste_max_total_size: 31457280      # 粘贴板总大小（30MB）
  max_upload_size: 57671680           # 最大上传文件大小（55MB，支持视频上传）

# 短链服务配置
shorturl:
  # 管理密码（用于自定义短链ID）
  # 留空 = 普通模式，只能随机ID，有速率限制
  # 设置密码 = 可使用自定义ID如 /s/1 /s/abc，无速率限制
  password: ""

# 粘贴板配置
paste:
  # 管理员密码（可设置更多访问次数或永久访问）
  # 留空 = 视频默认10次访问限制
  # 设置密码 = 可设置更多次数或永久访问
  admin_password: ""
  # 视频默认最大访问次数
  default_video_max_views: 10
  # 最大文件大小（字节），默认200MB
  max_file_size: 209715200

# 聊天室配置
chat:
  # 管理员密码（可管理所有聊天室）
  # 留空 = 无管理员功能
  # 设置密码 = 可查看和删除所有房间
  admin_password: ""

# Markdown 分享配置
mdshare:
  # 管理员密码（可管理所有分享）
  # 留空 = 无管理员功能
  admin_password: ""
  # 默认最大查看次数（2-10）
  default_max_views: 5
  # 默认过期天数
  default_expires_days: 30

# Excalidraw 画图配置
excalidraw:
  # 管理员密码（可永久保存、管理所有画图）
  # 留空 = 无管理员功能
  admin_password: ""
  # 默认过期天数（1-365）
  default_expires_days: 30
  # 最大内容大小（字节），默认10MB
  max_content_size: 10485760

# 孕期管理配置
pregnancy:
  # 默认过期天数（默认365天）
  default_expires_days: 365
  # 最大数据大小（字节），默认1MB
  max_data_size: 1048576

# SSH 终端配置
ssh:
  # 管理员密码（可查看和管理所有 SSH 会话）
  # 留空 = 无管理员功能
  # 设置密码 = 可通过 /api/terminal/admin/list 查看所有会话
  admin_password: ""

  # 是否验证 SSH 主机密钥（推荐启用以防止中间人攻击）
  # true = 首次连接记录主机密钥，后续连接验证
  # false = 接受任何主机密钥（不安全，仅用于测试）
  host_key_verification: true

  # 每个用户最大会话数（防止资源滥用）
  max_sessions_per_user: 10

  # 会话空闲超时（分钟）
  # WebSocket 断开后，如果超过此时间无活动，会自动关闭 SSH 连接
  session_idle_timeout: 5

  # 历史记录最大保存天数
  # 超过此天数的命令历史记录会被自动清理
  history_max_age_days: 30

  # 不活跃会话最大保存天数
  # 超过此天数未活跃的会话（包括数据库记录和历史）会被自动清理
  session_max_age_days: 7

# 加密密钥配置（通过环境变量设置）
# export TERMINAL_ENCRYPTION_KEY="your-32-byte-secret-key"
# 如果未设置，服务器会生成临时密钥（重启后已保存的 SSH 密码将无法解密）
